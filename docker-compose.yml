version: "3"

services:
  run:
    image: faasm/examples-run:${EXAMPLES_RUN_VERSION}
    working_dir: /usr/local/code/faasm
    stdin_open: true
    tty: true
    volumes:
      - ./:/code/examples
      - ./dev/faasm-local/wasm/:/usr/local/faasm/wasm
      - ./dev/faasm-local/shared/:/usr/local/faasm/shared
    environment:
      - LOG_LEVEL=info
      - LD_LIBRARY_PATH=/build/faasm/third-party/lib:/usr/local/lib
      - WASM_VM=${WASM_VM:-wavm}

  build:
    image: faasm/examples-build:${EXAMPLES_BUILD_VERSION}
    working_dir: /code/examples
    stdin_open: true
    tty: true
    volumes:
      - ./:/code/examples
      - ./dev/faasm-local/wasm/:/usr/local/faasm/wasm
      - ./dev/faasm-local/shared/:/usr/local/faasm/shared
